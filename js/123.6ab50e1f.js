"use strict";(self["webpackChunkvuefront"]=self["webpackChunkvuefront"]||[]).push([[123],{6123:function(e,r,a){a.r(r),a.d(r,{default:function(){return f}});a(560);var t=a(6252);const l={class:"login-wrapper"},o=(0,t._)("br",null,null,-1),s={class:"msg"};function i(e,r,a,i,u,m){const n=(0,t.up)("register-components");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t.Wm)(n),o,(0,t._)("div",s,[(0,t.Uk)(" 已有账户? "),(0,t._)("a",{style:{color:"blue"},onClick:r[0]||(r[0]=e=>this.$router.push("/login"))},"去登陆")])])}var u=a(3577);const m=(0,t._)("div",{class:"header"},[(0,t._)("p",null,"注册")],-1);function n(e,r,a,l,o,s){const i=(0,t.up)("el-input"),n=(0,t.up)("el-form-item"),c=(0,t.up)("el-button"),d=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)(t.HY,null,[m,(0,t.Wm)(d,{class:"form-wrapper",model:o.ruleForm,"status-icon":"",rules:o.rules,ref:"ruleForm","label-width":"auto"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{prop:"username"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{type:"text",onkeyup:"value=value.replace(/[^\\w\\.\\/]/ig,'')",modelValue:o.ruleForm.username,"onUpdate:modelValue":r[0]||(r[0]=e=>o.ruleForm.username=e),autocomplete:"off",placeholder:"用户名",class:"input-item",minlength:"3",maxlength:"30"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{type:"password",modelValue:o.ruleForm.password,"onUpdate:modelValue":r[1]||(r[1]=e=>o.ruleForm.password=e),autocomplete:"off",placeholder:"密码",class:"input-item",minlength:"6",maxlength:"30","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{prop:"email",rules:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{type:"text",modelValue:o.ruleForm.email,"onUpdate:modelValue":r[2]||(r[2]=e=>o.ruleForm.email=e),placeholder:"邮箱",class:"input-item",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(n,{class:"input-item-row",prop:"emailCheckCode"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{type:"text",onkeyup:"value=value.replace(/\\D/g,'')",modelValue:o.ruleForm.emailCheckCode,"onUpdate:modelValue":r[3]||(r[3]=e=>o.ruleForm.emailCheckCode=e),placeholder:"验证码",class:"input-item",clearable:""},null,8,["modelValue"]),(0,t.Wm)(c,{disabled:o.emailCheckCodeStatus,onClick:s.showEmailCheckCode},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(o.emailCheckCodeText),1)])),_:1},8,["disabled","onClick"])])),_:1}),(0,t.Wm)(n,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"loginBtn",onClick:r[4]||(r[4]=e=>s.Register("ruleForm"))},{default:(0,t.w5)((()=>[(0,t.Uk)("注册")])),_:1})])),_:1})])),_:1},8,["model","rules"])],64)}var c=a(5121),d=a(1348),h={name:"RegisterComponents",data(){const e=async(e,r,a)=>{""===r?a(new Error("请输入用户名")):r.length<3?a(new Error("输入的用户名太短了")):await this.checkNameFrom()?a():a(new Error("用户名已存在"))},r=(e,r,a)=>{""===r?a(new Error("请输入密码")):r.length<6?a(new Error("输入的密码太短了")):a()},a=async(e,r,a)=>{await this.checkEmail()?a():a(new Error("你已经注册过了,请去登陆吧"))},t=async(e,r,a)=>{""===r?a(new Error("请输入验证码")):(await this.checkEmailCode()?a():a(new Error("验证码输入错误")),a())};return{ruleForm:{username:"",password:"",email:"",emailCheckCode:""},rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:r,trigger:"blur"}],emailCheckCode:[{validator:t,trigger:"blur"}],email:[{validator:a,trigger:"blur"}]},emailCheckCodeText:"获取验证码",emailCheckCodeStatus:!1}},created(){},methods:{Register(e){this.$refs[e].validate((e=>{if(!e)return!1;c.Z.post("/api/register",this.ruleForm).then((e=>{210===e.data.code&&d.z8.success(e.data.message)}))}))},timer(e){e>0?(e--,this.emailCheckCodeText="已发送（"+e+"）",setTimeout((()=>{this.timer(e)}),1e3)):(this.emailCheckCodeText="获取验证码",this.emailCheckCodeStatus=!1)},showEmailCheckCode(){this.$refs.ruleForm.validateField("email",(e=>{if(!e)return!1;{this.emailCheckCodeStatus=!0;let e=60;this.timer(e),c.Z.get(`/api/register/getEmailCheckCode/${this.ruleForm.email}`).then((e=>{200===e.data.code&&d.z8.success(e.data.data)}))}}))},async checkNameFrom(){try{const e=await c.Z.get(`/api/register/checkName/${this.ruleForm.username}`);return 200===e.data.code}catch(e){return!1}},async checkEmail(){try{const e=await c.Z.get(`/api/register/checkEmail/${this.ruleForm.email}`);return 200===e.data.code}catch(e){return!1}},async checkEmailCode(){try{const e=await c.Z.post("/api/register/checkEmailCode",this.ruleForm);return 200===e.data.code}catch(e){return!1}}}},p=a(3744);const g=(0,p.Z)(h,[["render",n]]);var w=g,C={name:"RegisterView",components:{RegisterComponents:w}};const k=(0,p.Z)(C,[["render",i]]);var f=k}}]);
//# sourceMappingURL=123.6ab50e1f.js.map