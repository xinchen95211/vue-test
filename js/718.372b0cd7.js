"use strict";(self["webpackChunkvuefront"]=self["webpackChunkvuefront"]||[]).push([[718],{2189:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(6252),o=a(3577);const i={style:{"text-align":"center"}},s=["onClick"];function n(e,t,a,n,r,d){const c=(0,l.up)("star"),g=(0,l.up)("star-filled"),h=(0,l.up)("el-icon"),u=(0,l.up)("el-image"),m=(0,l.up)("el-card"),p=(0,l.up)("el-col"),k=(0,l.up)("el-row"),b=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.j4)(k,{gutter:5},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.imglist,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(p,{xs:12,sm:12,md:8,lg:4,key:e,"element-loading-text":"正在拼命加载中...","element-loading-svg-view-box":"-10, -10, 50, 50"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"body-style":{padding:"2px"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(h,{size:"30px",color:"lightblue",onClick:e=>d.selectStar(t)},{default:(0,l.w5)((()=>[e.star?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0})),e.star?((0,l.wg)(),(0,l.j4)(g,{key:1})):(0,l.kq)("",!0)])),_:2},1032,["onClick"])]),(0,l._)("div",{class:"related_box",onClick:t=>d.selectItem(e.id)},[(0,l.Wm)(u,{src:e.domain+"/"+e.prefix+"/"+e.suffix+"/"+e.thumbnail,fit:"cover",class:"el-image",onLoad:e=>r.loading[t]=!1},null,8,["src","onLoad"]),(0,l._)("div",null,[(0,l._)("span",null,(0,o.zw)(e.name),1)])],8,s)])),_:2},1024)])),_:2},1024)),[[b,!1!==r.loading[t]]]))),128))])),_:1})}var r=a(5781),d={name:"PhotoCard",components:{StarFilled:r.StarFilled,Star:r.Star},data(){return{loading:[]}},methods:{selectItem(e){this.$emit("selectItem",e)},clearLoading(){this.loading=[]},selectStar(e){this.$emit("selectStar",e)},selectDownload(){alert("开发中")}},props:{imglist:Array}},c=a(3744);const g=(0,c.Z)(d,[["render",n],["__scopeId","data-v-519e0572"]]);var h=g},1718:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var l=a(6252),o=a(3577);const i={class:"centers"},s={class:"slider"},n={class:"centers"},r={key:0,style:{color:"skyblue","font-size":"20px"}},d={key:1,style:{color:"skyblue","font-size":"20px"}},c={class:"centers"};function g(e,t,a,g,h,u){const m=(0,l.up)("tabs-video"),p=(0,l.up)("el-slider"),k=(0,l.up)("photo-card"),b=(0,l.Q2)("infinite-scroll");return(0,l.wg)(),(0,l.iD)("div",{class:(0,o.C_)(h.isDark?"darks":"")},[(0,l._)("div",{style:(0,o.j5)({height:h.tabHeight})},[(0,l.Wm)(m,{onHandleSelect:u.handleSelect,onHandleSearch:u.handleSearch,onToggleDark:u.toggleDark,tablebs:u.table,"is-dark":h.isDark},null,8,["onHandleSelect","onHandleSearch","onToggleDark","tablebs","is-dark"]),(0,l._)("div",i,[(0,l._)("div",s,[(0,l.Wm)(p,{modelValue:h.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>h.currentPage=e),min:h.minPage,max:h.totalPage,onChange:u.changePage},null,8,["modelValue","min","max","onChange"])])])],4),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{class:"infinite-list",style:(0,o.j5)([{overflow:"auto"},{height:h.cardHeight}])},[(0,l.Wm)(k,{ref:"photoCard",imglist:h.imgList,onSelectItem:u.selectItem,onSelectStar:u.selectStar},null,8,["imglist","onSelectItem","onSelectStar"]),(0,l._)("div",n,[h.pLoading?((0,l.wg)(),(0,l.iD)("p",r,"正在努力加载中")):(0,l.kq)("",!0),h.pmore?((0,l.wg)(),(0,l.iD)("p",d,"已经没有数据可以加载了")):(0,l.kq)("",!0)])],4)),[[b,u.load]]),(0,l._)("div",c,[(0,l._)("p",{style:(0,o.j5)([{color:"skyblue","font-size":"20px"},{height:h.folderHeight}])},"视频来自于网络，侵权联系删除",4)])],2)}var h=a(2189),u=a(9963);const m=e=>((0,l.dD)("data-v-c237c322"),e=e(),(0,l.Cn)(),e),p={class:"container-fluid"},k=m((()=>(0,l._)("div",null," 美图站",-1))),b=[k],w=m((()=>(0,l._)("span",{class:"navbar-toggler-icon"},null,-1))),v=[w],_={class:"collapse navbar-collapse hidden-md-and-down",id:"navbarSupportedContent"},f={class:"navbar-nav me-auto mb-2 mb-lg-0"},S={class:"nav-item dropdown"},D=m((()=>(0,l._)("a",{class:"nav-link dropdown-toggle",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," 分类1 ",-1))),L={class:"dropdown-menu"},y=["onClick"],C=m((()=>(0,l._)("div",null," 美图站",-1))),P=[C],x={class:"d-flex",role:"search"},H=m((()=>(0,l._)("br",null,null,-1)));function W(e,t,a,i,s,n){const r=(0,l.up)("el-avatar"),d=(0,l.up)("el-dropdown-item"),c=(0,l.up)("el-dropdown-menu"),g=(0,l.up)("el-dropdown"),h=(0,l.up)("el-input"),m=(0,l.up)("el-button"),k=(0,l.up)("el-drawer");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("nav",{class:(0,o.C_)(["navbar navbar-expand-lg",a.isDark?" ":"lights"]),style:{width:"100%",height:"8vh"}},[(0,l._)("div",p,[(0,l.Wm)(g,{trigger:"click",class:"navbar-brand",onCommand:n.handleCommand},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[a.isDark?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:0,command:"dark"},{default:(0,l.w5)((()=>[(0,l.Uk)("深色模式")])),_:1})),a.isDark?((0,l.wg)(),(0,l.j4)(d,{key:1,command:"dark"},{default:(0,l.w5)((()=>[(0,l.Uk)("浅色模式")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(d,{command:"goback"},{default:(0,l.w5)((()=>[(0,l.Uk)("返回上一页")])),_:1}),(0,l.Wm)(d,{command:"retrievePassword"},{default:(0,l.w5)((()=>[(0,l.Uk)("修改密码")])),_:1}),(0,l.Wm)(d,{command:"logout"},{default:(0,l.w5)((()=>[(0,l.Uk)("退出登陆")])),_:1})])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("span",null,[(0,l._)("div",null,[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Uk)(" user ")])),_:1})])])])),_:1},8,["onCommand"]),(0,l._)("div",{class:"navbar-toggler",onClick:t[0]||(t[0]=(...e)=>n.goPhoto&&n.goPhoto(...e))},b),(0,l._)("button",{class:"navbar-toggler",onClick:t[1]||(t[1]=e=>s.drawer=!0),type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},v),(0,l._)("div",_,[(0,l._)("ul",f,[(0,l._)("li",S,[D,(0,l._)("ul",L,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.tablebs,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("a",{class:"dropdown-item",onClick:t=>n.handleSelect(e.tablesname)},(0,o.zw)(e.name),9,y)])))),128))])])]),(0,l._)("div",{onClick:t[2]||(t[2]=(...e)=>n.goPhoto&&n.goPhoto(...e)),class:"hidden-md-and-down"},P),(0,l._)("div",x,[(0,l.wy)((0,l._)("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[3]||(t[3]=e=>s.inputText=e)},null,512),[[u.nr,s.inputText]]),(0,l._)("button",{class:"btn btn-outline-success",onClick:t[4]||(t[4]=(...e)=>n.handleSearch&&n.handleSearch(...e))},"Search")])])])],2),(0,l.Wm)(k,{title:"导航页",modelValue:s.drawer,"onUpdate:modelValue":t[6]||(t[6]=e=>s.drawer=e),direction:"ltr","before-close":n.handleClose,size:"50%",style:{"text-align":"center","align-items":"center"}},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(h,{placeholder:"请输入内容",modelValue:s.inputText,"onUpdate:modelValue":t[5]||(t[5]=e=>s.inputText=e),class:"input-with-select",style:{width:"100%"}},null,8,["modelValue"])]),(0,l.Wm)(m,{icon:s.Search,style:{width:"100%"}},null,8,["icon"]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.tablebs,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l.Wm)(m,{onClick:t=>n.handleSelect(e.tablesname),style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["onClick"]),H])))),128))])),_:1},8,["modelValue","before-close"])],64)}a(560);var I=a(5781),T={data(){return{dialogVisible:!1,drawer:!1,inputText:"",Search:I.Search}},created(){},mounted(){this.openDark()},methods:{goPhoto(){this.$router.push("/")},handleCommand(e){switch(e){case"dark":this.toggleDark();break;case"goback":this.$router.go(-1);break;case"logout":this.$router.replace("/logout");break;case"retrievePassword":this.$router.replace("/retrievePassword");break;default:console.log(e);break}},handleClose(e){e()},handleSelect(e){this.inputText="",console.log(e),this.$emit("handleSelect",e)},handleSearch(){this.$emit("handleSearch",this.inputText)},toggleDark(){this.$emit("toggleDark")},openDark(){const e=document.querySelector("nav");e&&(this.isDark?e.setAttribute("data-bs-theme","dark"):e.removeAttribute("data-bs-theme"))}},props:{isDark:Boolean,tablebs:Array},watch:{isDark(){this.openDark()}}},V=a(3744);const $=(0,V.Z)(T,[["render",W],["__scopeId","data-v-c237c322"]]);var U=$,j=a(5121),q=JSON.parse('[{"id":1,"tablesname":"/","name":"首页"},{"id":2,"tablesname":"like","name":"我喜欢"}]'),z={name:"PhotoMain",computed:{table(){return q}},data(){return{cardHeight:"",tabHeight:"",folderHeight:"",pmore:!1,minPage:1,imgList:[],tableName:"",currentPage:1,search:"",totalPage:93,totalCount:2162,loading:[],isDark:null,pLoading:!1}},created(){this.$nextTick((()=>{let e=document.documentElement.clientHeight;console.log("可视区域高度",e),this.cardHeight=.8*e+"px",this.tabHeight=.14*e+"px",this.folderHeight=.05*e+"px",console.log(this.cardHeight,this.tabHeight,this.folderHeight)}));let e=localStorage.getItem("isDark");null==e?(localStorage.setItem("isDark","0"),this.isDark=!1):this.isDark="0"===e},methods:{load(){this.pLoading||(this.currentPage>=this.totalPage?this.pmore=!0:(this.pmore=!1,this.pLoading=!0,this.currentPage+=1,j.Z.post("api/video",{tag:this.tableName,row:this.currentPage}).then((e=>{200===e.data.code&&(this.imgList=this.imgList.concat(e.data.data.records),this.pLoading=!1)})).catch((e=>{this.pLoading=!1,this.currentPage-=1,console.log(e)}))))},selectItem(e){window.open(`/videoshow/${e}`)},selectStar(e){console.log(this.imgList[e].id),j.Z.get("api/video/like/"+this.imgList[e].id).then((t=>{2001===t.data.code&&(this.imgList[e].star=!this.imgList[e].star)}))},imgListLoad(){j.Z.post("api/video",{tag:this.tableName,row:this.currentPage}).then((e=>{200===e.data.code&&(this.$refs.photoCard.clearLoading(),this.imgList=e.data.data.records,this.totalCount=e.data.data.total,this.currentPage=e.data.data.current,this.totalPage=e.data.data.pages)})).catch((e=>{console.log("error"+e)}))},pageTurning(e){this.currentPage=e,this.imgListLoad()},changePage(){this.imgListLoad()},handleSelect(e){this.currentPage=1,this.tableName=e,this.imgListLoad()},handleSearch(e){this.currentPage=1,this.search=e},toggleDark(){this.isDark=!this.isDark},openDark(){const e=document.querySelector("html");e&&(this.isDark?(e.classList.remove("light"),e.classList.add("dark"),localStorage.setItem("isDark","0")):(e.classList.remove("dark"),e.classList.add("light"),localStorage.setItem("isDark","1")))}},components:{PhotoCard:h.Z,TabsVideo:U},watch:{isDark(){this.openDark()},tableName(){this.imgListLoad()},search(){this.imgListLoad()}}};const Z=(0,V.Z)(z,[["render",g],["__scopeId","data-v-4bdc59d2"]]);var N=Z}}]);
//# sourceMappingURL=718.372b0cd7.js.map